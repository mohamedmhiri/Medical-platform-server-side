{% extends "BenDoctorsBundle::layout.html.twig" %}
{% block title %}
    Tableau de bord | {{ parent() }}
{% endblock %}
{% block head %}
    {% block stylesheet %}
        {{ parent() }}
        <link href="{{ asset('css/fine-uploader-gallery.css') }}" rel="stylesheet">
        {#<!-- Fine Uploader New/Modern CSS file#}
    {#====================================================================== -->#}
        {#<link href=""{{ asset('fine-upload/fine-uploader/fine-uploader-new.css')}}" rel="stylesheet">#}
        {#<link href=""{{ asset('css/mine-fine-uploader.css')}}" rel="stylesheet">#}



    {% endblock %}

{% endblock %}


{% block body %}
    <!-- page content -->
    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                    <h3> Ajout d'un examen m√©dical </h3>
                </div>


            </div>
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <br />
                            <form action="{{ path('test_create') }}" method="POST" id="fileupload" data-parsley-validate class="form-horizontal form-label-left" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="user">Patient </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" disabled="disabled" name="unused" value="{{ entity.person.fullName }}">
                                        <input type="hidden" name="person" value="{{ entity.person.id }}">
                                    </div>
                                </div>
                                {{ form_widget(form) }}

                                <div class="ln_solid">
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                        <div class="container" id="container">
                                            <div id="actions" class="row">

                                                <div class="col-lg-7">
                                                    {#<!-- The fileinput-button span is used to style the file input field as button -->#}
                                                    {#<span class="btn btn-success fileinput-button">#}
                                                        {#<i class="glyphicon glyphicon-plus"></i>#}
                                                        {#<span>Add files...</span>#}
                                                    {#</span>#}
                                                    {#<button type="reset" class="btn btn-warning cancel">#}
                                                        {#<i class="glyphicon glyphicon-ban-circle"></i>#}
                                                        {#<span>Cancel upload</span>#}
                                                    {#</button>#}
                                                    <button type="submit" class="btn btn-primary start" id="addFiles">
                                                        <i class="glyphicon glyphicon-upload"></i>
                                                        <span>Ajouter</span>
                                                    </button>

                                                </div>

                                                        {#<div class="col-lg-5">#}
                                                            {#<!-- The global file processing state -->#}
                                                            {#<span class="fileupload-process">#}
                                                        {#<div id="total-progress" class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">#}
                                                        {#<div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress></div>#}
                                                        {#</div>#}
                                                    {#</span>#}
                                                        {#</div>#}

                                            </div>

                                            {#<div class="table table-striped" class="files" id="previews">#}

                                                {#<div id="template" class="file-row">#}
                                                    {#<!-- This is used as the file preview template -->#}
                                                    {#<div>#}
                                                        {#<span class="preview"><img data-dz-thumbnail /></span>#}
                                                    {#</div>#}
                                                    {#<div>#}
                                                        {#<p class="name" data-dz-name></p>#}
                                                        {#<strong class="error text-danger" data-dz-errormessage></strong>#}
                                                    {#</div>#}
                                                    {#<div>#}
                                                        {#<p class="size" data-dz-size></p>#}
                                                        {#<div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">#}
                                                            {#<div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress></div>#}
                                                        {#</div>#}
                                                    {#</div>#}
                                                    {#<div>#}
                                                        {#<button data-dz-remove class="btn btn-warning cancel">#}
                                                            {#<i class="glyphicon glyphicon-ban-circle"></i>#}
                                                            {#<span>Cancel</span>#}
                                                        {#</button>#}
                                                        {#<button data-dz-remove class="btn btn-danger delete">#}
                                                            {#<i class="glyphicon glyphicon-trash"></i>#}
                                                            {#<span>Delete</span>#}
                                                        {#</button>#}
                                                    {#</div>#}
                                                {#</div>#}

                                            {#</div>#}
                                        </div>
                                        {#<button type="submit" id="addFiles" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span> Ajouter</button>#}

                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <!-- /page content -->
{#<h3><span class="glyphicon glyphicon-user"></span> Ajout d'un examen medicale</h3>#}

{#<form action="{{ path('test_create') }}"  class="form-horizontal col-md-8" method="post">#}
      {#{{ form_widget(form) }}#}

    {#<div class="form-group">#}
      {#<div class="col-sm-offset-6 col-sm-6">#}
        {#<button type="submit" name="subvalider" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span> Ajouter</button>#}
      {#</div>#}
    {#</div>#}
{#</form>#}
    {#<div id="uploader"></div>#}

{% endblock %}
{% block javascripts %}
{{ parent() }}
<script src="{{ asset('js/moment.js') }}"></script>
<script src="{{ asset('bootstrap/js/bootstrap-datetimepicker.js') }}"></script>
    {#<!-- Fine Uploader jQuery JS file#}
            {#====================================================================== -->#}
    {#<script src="{{ asset('fine-upload/fine-uploader/jquery.fine-uploader.js')}}"></script>#}
    {#<!-- Fine Uploader DOM Element#}
        {#====================================================================== -->#}
    {#<div id="fine-uploader-manual-trigger"></div>#}

    {#<!-- Your code to create an instance of Fine Uploader and bind to the DOM/template#}
    {#====================================================================== -->#}
    {#<script>#}
        {#$('#fine-uploader-manual-trigger').fineUploader({#}
            {#template: 'qq-template-manual-trigger',#}
            {#request: {#}
                {#endpoint: '/uploads/gallery'#}
            {#},#}
            {#thumbnails: {#}
                {#placeholders: {#}
                    {#waitingPath: '/source/placeholders/waiting-generic.png',#}
                    {#notAvailablePath: '/source/placeholders/not_available-generic.png'#}
                {#}#}
            {#},#}
            {#autoUpload: false#}
        {#});#}

        {#$('#trigger-upload').click(function() {#}
            {#$('#fine-uploader-manual-trigger).fineUploader('uploadStoredFiles');#}
        {#});#}
    {#</script>#}
<script>
    (function($) {
    $('.has-datepicker').attr('data-date-format', 'YYYY-MM-DD').parent().datetimepicker({
      pickTime: false
    });
        $('#ben_test_consultation').closest('.form-group').hide();
        $('select').removeClass('form-control').select2({minimumResultsForSearch: -1});

        var hasvisualissue = $('#ben_test_hasvisualissue'),
            fixedvisualissue = hasvisualissue.closest('.form-group').next().hide();
            fixedvisualissue.children('label').html('');

        if(hasvisualissue.is(":checked")){
            fixedvisualissue.show();
        }
        hasvisualissue.on('change', function(){
          if(hasvisualissue.is(":checked"))
            fixedvisualissue.show();
          else fixedvisualissue.hide();
        });

    })(jQuery);
</script>
<script>
    (function($) {
//        $.ajaxSetup({
//            beforeSend: function (jqXHR, settings) {
//                if(settings.type === "POST")
//                    console.log("salem");
//            }
//        });
//        $.('.glyphicon-upload').submit(function (e) {
//           e.preventDefault();
//        });
    })(jQuery);
</script>
{% endblock %}
